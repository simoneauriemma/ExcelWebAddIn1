<!doctype html>

<html>
<head>
    <script src="../../shared_js/jquery-1.11.2.min.js"></script>

    <script src="../../shared_js/perfect-scrollbar/js/min/perfect-scrollbar.jquery.min.js"></script>
    <link rel="stylesheet" href="../../shared_js/perfect-scrollbar/css/perfect-scrollbar.min.css">

    <script src="../../../bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>

    <link rel="import" href="../metadata-list-controllet.html" />
    <link rel="import" href="../metadata-view-controllet.html" />

    <link rel="import" href="../../../bower_components/paper-material/paper-material.html" />
</head>
<body>

<style>

    #container {
        top: 48px;
        left :400px;
        height: 80vh;
        width: calc(100% - 800px);
        /*background: red;*/
    }

</style>

<paper-material id="container" elevation="5">

    <!--<metadata-list-controllet id="metadata_list"></metadata-list-controllet>-->
    <metadata-view-controllet id="metadata_list"></metadata-view-controllet>

</paper-material>

<script>

    var metadata = [];

    var MANDATORY = [{ name: "title", type: "CC_RF" }, { name: "description", type: "CC_RF" }, { name: "license", type: "CC_RAF" }, { name: "language", type: "EF" }];
    var CC_RF = {
        title:"The Best Dataset (O' Megl Dataset)",
        description:"Breve descrizione del meglio datasetto mai fatto!!! Bla bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla  bla bla",
        tags:"#fanasy #postilla #dcol #anip #cos #sbiricuda #fotocos",
        last_update:"",
        publisher:"",
        contact_name:"",
        contact_email:"",
        unique_identifier:"",
        public_access_level:""
    };
    var CC_RAF = {
        bureau_code:"",
        program_code:"",
        access_level_comment:"",
        download_url:"",
        endpoint:"",
        format:"",
        license:"",
        spatial:"",
        temporal:""
    };
    var EF = {
        category:"",
        data_dictionary:"",
        data_quality:"",
        distribution:"",
        frequency:"",
        homepage_url:"",
        language:"",
        primary_IT_investment_UII:"",
        related_documents:"",
        release_date:"",
        system_of_records:""
    };

    metadata = {"MANDATORY":MANDATORY, "CC_RF":CC_RF, "CC_RAF":CC_RAF, "EF":EF};
    metadata = JSON.stringify(metadata);

    var metadata_list = document.getElementById('metadata_list');

//    $('document').ready(function(){
//        metadata_list.setMetadata(metadata);
//    });
//
//    setTimeout(function(){
//        metadata_list.setMetadata(metadata);
//    }, 1000);


    metadata_list.addEventListener("metadata-view-controllet_attached", function (e) {
        metadata_list.setMetadata(metadata);
//        console.log("we");
    });

    metadata_list.addEventListener("metadata-view-controllet_update-metadata", function (e) {
        console.log(e.detail.metadata);
        console.log(JSON.parse(e.detail.metadata));
    });

</script>

</body>
</html>